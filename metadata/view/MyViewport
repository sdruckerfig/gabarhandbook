{
    "type": "Ext.container.Viewport",
    "reference": {
        "name": "items",
        "type": "array"
    },
    "codeClass": null,
    "userConfig": {
        "border": 1,
        "designer|initialView": true,
        "designer|userAlias": "myviewport",
        "designer|userClassName": "MyViewport",
        "height": 250,
        "html": [
            "<"
        ],
        "layout": "border",
        "width": 400
    },
    "configAlternates": {
        "designer|initialView": "boolean",
        "designer|userAlias": "string",
        "designer|userClassName": "string",
        "height": "auto",
        "layout": "string",
        "width": "auto",
        "html": "object",
        "border": "auto"
    },
    "name": "MyViewport",
    "designerId": "ed99b2fa-74dc-4e63-8a91-ebb4d188332b",
    "viewControllerInstanceId": "b4cf5a63-a524-4f8c-87a8-2869925a6612",
    "viewModelInstanceId": "4bf1b08b-2088-4336-97d2-e6ff475f208e",
    "cn": [
        {
            "type": "Ext.tree.Panel",
            "reference": {
                "name": "items",
                "type": "array"
            },
            "codeClass": null,
            "userConfig": {
                "collapsible": false,
                "flex": 2,
                "layout|region": "center",
                "layout|split": true,
                "reference": "mytree",
                "rootVisible": false,
                "selection": [
                    "{selectedNode}"
                ],
                "store": [
                    "{TableOfContents}"
                ],
                "title": "Table of Contents"
            },
            "configAlternates": {
                "collapsible": "boolean",
                "flex": "number",
                "layout|region": "string",
                "layout|split": "boolean",
                "title": "string",
                "store": "binding",
                "reference": "string",
                "rootVisible": "boolean",
                "selection": "binding"
            },
            "name": "MyTreePanel",
            "designerId": "d40395d4-3043-4ecc-9037-2bbf6009ca19",
            "cn": [
                {
                    "type": "Ext.tree.View",
                    "reference": {
                        "name": "viewConfig",
                        "type": "object"
                    },
                    "codeClass": null,
                    "name": "MyTreeView",
                    "designerId": "851ed805-3594-4841-bde9-dc331d905bd6"
                },
                {
                    "type": "Ext.panel.Tool",
                    "reference": {
                        "name": "tools",
                        "type": "array"
                    },
                    "codeClass": null,
                    "userConfig": {
                        "tooltip": "Expand All",
                        "type": "expand"
                    },
                    "configAlternates": {
                        "tooltip": "string",
                        "type": "string"
                    },
                    "name": "MyTool",
                    "designerId": "3c82b15b-f9cc-495e-9411-d520a4fa435d",
                    "cn": [
                        {
                            "type": "fixedfunction",
                            "reference": {
                                "name": "items",
                                "type": "array"
                            },
                            "codeClass": null,
                            "userConfig": {
                                "designer|params": [
                                    "owner",
                                    "tool",
                                    "event"
                                ],
                                "designer|viewControllerFn": "onExpandAll",
                                "fn": "callback",
                                "implHandler": [
                                    "var store = this.getStore('TableOfContents');",
                                    "store.getRootNode().expandChildren(true);"
                                ]
                            },
                            "configAlternates": {
                                "designer|params": "typedarray",
                                "designer|viewControllerFn": "string",
                                "fn": "string",
                                "implHandler": "code"
                            },
                            "name": "callback",
                            "designerId": "b0fed165-90c3-49a7-9928-5adfee49d1e3"
                        }
                    ]
                },
                {
                    "type": "Ext.panel.Tool",
                    "reference": {
                        "name": "tools",
                        "type": "array"
                    },
                    "codeClass": null,
                    "userConfig": {
                        "tooltip": "Collapse All",
                        "type": "collapse"
                    },
                    "configAlternates": {
                        "tooltip": "string",
                        "type": "string"
                    },
                    "name": "MyTool2",
                    "designerId": "37857698-9799-4be9-a04a-63362cc8ed2a",
                    "cn": [
                        {
                            "type": "fixedfunction",
                            "reference": {
                                "name": "items",
                                "type": "array"
                            },
                            "codeClass": null,
                            "userConfig": {
                                "designer|params": [
                                    "owner",
                                    "tool",
                                    "event"
                                ],
                                "designer|viewControllerFn": "onCollapseAll",
                                "fn": "callback",
                                "implHandler": [
                                    "var store = this.getStore('TableOfContents');",
                                    "store.getRootNode().collapseChildren(true);",
                                    ""
                                ]
                            },
                            "configAlternates": {
                                "designer|params": "typedarray",
                                "designer|viewControllerFn": "string",
                                "fn": "string",
                                "implHandler": "code"
                            },
                            "name": "callback",
                            "designerId": "ddbb3ab0-9c45-4410-9d3e-a1fa2f58c898"
                        }
                    ]
                },
                {
                    "type": "viewcontrollereventbinding",
                    "reference": {
                        "name": "listeners",
                        "type": "array"
                    },
                    "codeClass": null,
                    "userConfig": {
                        "fn": "onTreepanelCheckChange",
                        "implHandler": [
                            "var tree = this.lookup('mytree');",
                            "var nodes = tree.getChecked();",
                            "var data = [];",
                            "",
                            " for (var i=0; i<nodes.length; i++) {",
                            "",
                            "     var children = this.getAllChildNodes(nodes[i]);",
                            "",
                            "     if (!Ext.isArray(children)) {",
                            "         children = [children];",
                            "     }",
                            "",
                            "     for (var j=0; j<children.length; j++) {",
                            "          var found = false;",
                            "          for (var k=0; k<data.length; k++) {",
                            "              if (data[k].id == children[j].id) {",
                            "                  found = true;",
                            "                  break;",
                            "              }",
                            "          }",
                            "          if (!found) {",
                            "         data.push({",
                            "             title: children[j].get('text'),",
                            "             content: children[j].get('content'),",
                            "             depth: children[j].get('depth'),",
                            "             id: children[j].id",
                            "         });",
                            "     }",
                            "     }",
                            "     tree.setData(data);",
                            "",
                            " }",
                            "this.lookup('contentPnl').setData(data);",
                            "this.highlightTerms();"
                        ],
                        "name": "checkchange",
                        "scope": "me"
                    },
                    "configAlternates": {
                        "fn": "string",
                        "implHandler": "code",
                        "name": "string",
                        "scope": "string"
                    },
                    "name": "onTreepanelCheckChange",
                    "designerId": "b43f6c6b-28c3-4827-8a52-3f474ecc34cc"
                },
                {
                    "type": "viewcontrollereventbinding",
                    "reference": {
                        "name": "listeners",
                        "type": "array"
                    },
                    "codeClass": null,
                    "userConfig": {
                        "fn": "onTreepanelSelect",
                        "implHandler": [
                            "var tree = this.lookup('mytree');",
                            "var checkedNodes = tree.getChecked();",
                            "if (checkedNodes.length == 0) {",
                            "    var nodes = this.getAllChildNodes(record);",
                            "    if (Ext.isArray(nodes)) {",
                            "",
                            "        var data = [];",
                            "        for (var i=0; i<nodes.length; i++) {",
                            "          data.push({",
                            "              title: nodes[i].get('text'),",
                            "              content: nodes[i].get('content'),",
                            "              depth: nodes[i].get('depth')",
                            "          });",
                            "        }",
                            "        this.lookup('contentPnl').setData(data);",
                            "",
                            "    } else {",
                            "        this.lookup('contentPnl').setData([{",
                            "            title: record.get('text'),",
                            "            content: record.get('content'),",
                            "            depth: record.get('depth')",
                            "        }]);",
                            "    }",
                            "    this.highlightTerms();",
                            "}",
                            "",
                            "if (record.get('versions') && record.get('versions').length > 0) {",
                            "    var s = this.getViewModel().get('ContentVersions');",
                            "    s.removeAll(true);",
                            "    s.add({",
                            "        id: 0,",
                            "        text: 'Current Version'",
                            "    });",
                            "    var versions = record.get('versions');",
                            "    for (var i=0; i<versions.length; i++) {",
                            "        s.add({",
                            "            id: i+1,",
                            "            text: versions[i].title",
                            "        });",
                            "    }",
                            "}"
                        ],
                        "name": "select",
                        "scope": "me"
                    },
                    "configAlternates": {
                        "fn": "string",
                        "implHandler": "code",
                        "name": "string",
                        "scope": "string"
                    },
                    "name": "onTreepanelSelect",
                    "designerId": "9a4facf3-9c43-4334-8134-b558d4b5c053"
                },
                {
                    "type": "Ext.panel.Tool",
                    "reference": {
                        "name": "tools",
                        "type": "array"
                    },
                    "codeClass": null,
                    "userConfig": {
                        "tooltip": "Help",
                        "type": "help"
                    },
                    "configAlternates": {
                        "tooltip": "string",
                        "type": "string"
                    },
                    "name": "MyTool3",
                    "designerId": "321242c1-7e0a-4c86-b9e6-9e54287ae041"
                }
            ]
        },
        {
            "type": "Ext.panel.Panel",
            "reference": {
                "name": "items",
                "type": "array"
            },
            "codeClass": null,
            "userConfig": {
                "bodyPadding": 10,
                "collapsible": true,
                "flex": 3,
                "layout|region": "east",
                "layout|split": true,
                "reference": "contentPnl",
                "scrollable": true,
                "title": "Content",
                "width": 150
            },
            "configAlternates": {
                "collapsible": "boolean",
                "flex": "number",
                "layout|region": "string",
                "layout|split": "boolean",
                "title": "string",
                "width": "auto",
                "bodyPadding": "auto",
                "reference": "string",
                "scrollable": "auto"
            },
            "name": "MyPanel1",
            "designerId": "714cce22-a9bb-47b4-8534-37ea1c482130",
            "cn": [
                {
                    "type": "Ext.panel.Tool",
                    "reference": {
                        "name": "tools",
                        "type": "array"
                    },
                    "codeClass": null,
                    "userConfig": {
                        "type": "print"
                    },
                    "configAlternates": {
                        "type": "string"
                    },
                    "name": "MyTool1",
                    "designerId": "23e5dab4-8a9e-44d8-b170-562b3f17e62d",
                    "cn": [
                        {
                            "type": "fixedfunction",
                            "reference": {
                                "name": "items",
                                "type": "array"
                            },
                            "codeClass": null,
                            "userConfig": {
                                "designer|params": [
                                    "owner",
                                    "tool",
                                    "event"
                                ],
                                "fn": "callback",
                                "implHandler": [
                                    "owner.print();"
                                ]
                            },
                            "configAlternates": {
                                "designer|params": "typedarray",
                                "fn": "string",
                                "implHandler": "code"
                            },
                            "name": "callback",
                            "designerId": "7d7d9c49-519d-4f33-91f6-efbcd6188835"
                        }
                    ]
                },
                {
                    "type": "Ext.XTemplate",
                    "reference": {
                        "name": "tpl",
                        "type": "object"
                    },
                    "codeClass": null,
                    "userConfig": {
                        "designer|displayName": "tpl",
                        "implHandler": [
                            "<tpl for=\".\">",
                            "    <h{depth}>{title}</h{depth}>",
                            "    {content}",
                            "</tpl>"
                        ]
                    },
                    "configAlternates": {
                        "designer|displayName": "string",
                        "implHandler": "code"
                    },
                    "name": "tpl",
                    "designerId": "505ab917-23d2-407a-9f4f-ae71ca6dacc4"
                },
                {
                    "type": "Ext.toolbar.Toolbar",
                    "reference": {
                        "name": "dockedItems",
                        "type": "array"
                    },
                    "codeClass": null,
                    "userConfig": {
                        "cls": [
                            "warning"
                        ],
                        "dock": "top",
                        "hidden": [
                            "{!versionsAvailable}"
                        ]
                    },
                    "configAlternates": {
                        "hidden": "binding",
                        "cls": "typedarray",
                        "dock": "string"
                    },
                    "name": "MyToolbar",
                    "designerId": "8e39a139-30b9-45d6-8189-dbc6479cebad",
                    "cn": [
                        {
                            "type": "Ext.toolbar.TextItem",
                            "reference": {
                                "name": "items",
                                "type": "array"
                            },
                            "codeClass": null,
                            "userConfig": {
                                "html": "Multiple Versions Available",
                                "layout|flex": null
                            },
                            "configAlternates": {
                                "html": "string",
                                "layout|flex": "number"
                            },
                            "name": "MyTextItem",
                            "designerId": "c7d34b89-873b-4849-8270-5867bdea4e2d"
                        },
                        {
                            "type": "Ext.toolbar.Fill",
                            "reference": {
                                "name": "items",
                                "type": "array"
                            },
                            "codeClass": null,
                            "userConfig": {
                                "layout|flex": null
                            },
                            "configAlternates": {
                                "layout|flex": "number"
                            },
                            "name": "MyFill",
                            "designerId": "10ab163a-7bfe-4d63-bca8-ac80c2a8c511"
                        },
                        {
                            "type": "Ext.form.field.ComboBox",
                            "reference": {
                                "name": "items",
                                "type": "array"
                            },
                            "codeClass": null,
                            "userConfig": {
                                "emptyText": "Select Version",
                                "fieldLabel": null,
                                "forceSelection": true,
                                "layout|flex": null,
                                "queryMode": "local",
                                "store": [
                                    "{ContentVersions}"
                                ],
                                "valueField": "id",
                                "width": 200
                            },
                            "configAlternates": {
                                "store": "binding",
                                "emptyText": "string",
                                "fieldLabel": "string",
                                "forceSelection": "boolean",
                                "layout|flex": "number",
                                "queryMode": "string",
                                "valueField": "datafield",
                                "width": "auto"
                            },
                            "name": "MyComboBox",
                            "designerId": "79fe4eed-9184-4d52-bfa0-81f6eb7d773c",
                            "cn": [
                                {
                                    "type": "viewcontrollereventbinding",
                                    "reference": {
                                        "name": "listeners",
                                        "type": "array"
                                    },
                                    "codeClass": null,
                                    "userConfig": {
                                        "fn": "changeVersion",
                                        "implHandler": [
                                            "var id = record.get('id');",
                                            "var dataRec =  this.getViewModel().get('selectedNode');",
                                            "var versions = dataRec.get('versions');",
                                            "if (id == 0) {",
                                            "    this.lookup('contentPnl').setData([{",
                                            "                    title: dataRec.get('text'),",
                                            "                    content: dataRec.get('content'),",
                                            "                    depth: dataRec.get('depth')",
                                            "    }]);",
                                            "} else {",
                                            "     this.lookup('contentPnl').setData([{",
                                            "                    title: dataRec.get('text'),",
                                            "                    content: versions[id - 1].content,",
                                            "                    depth: dataRec.get('depth')",
                                            "    }]);",
                                            "}"
                                        ],
                                        "name": "select",
                                        "scope": "me"
                                    },
                                    "configAlternates": {
                                        "fn": "string",
                                        "implHandler": "code",
                                        "name": "string",
                                        "scope": "string"
                                    },
                                    "name": "changeVersion",
                                    "designerId": "6d3e355d-b263-44d5-996b-919bdaf7676f"
                                }
                            ]
                        }
                    ]
                }
            ]
        },
        {
            "type": "Ext.panel.Panel",
            "reference": {
                "name": "items",
                "type": "array"
            },
            "codeClass": null,
            "userConfig": {
                "bodyCls": [
                    "sbgbackground"
                ],
                "bodyPadding": 5,
                "container|align": "middle",
                "header": false,
                "height": 89,
                "layout": "hbox",
                "layout|region": "north",
                "margin": 0,
                "title": "My Panel"
            },
            "configAlternates": {
                "header": "boolean",
                "height": "auto",
                "layout|region": "string",
                "title": "string",
                "bodyPadding": "auto",
                "container|align": "string",
                "layout": "string",
                "margin": "auto",
                "bodyCls": "typedarray"
            },
            "name": "MyPanel",
            "designerId": "f6cabad0-8ca5-440d-b06d-c3cc3effc5e7",
            "cn": [
                {
                    "type": "Ext.Component",
                    "reference": {
                        "name": "items",
                        "type": "array"
                    },
                    "codeClass": null,
                    "userConfig": {
                        "html": [
                            "<div style=\"font-weight: bold; font-size: 22px; color: white;\">Bar Rules Handbook</div>"
                        ],
                        "layout|flex": 2,
                        "margin": null
                    },
                    "configAlternates": {
                        "html": "object",
                        "layout|flex": "number",
                        "margin": "auto"
                    },
                    "name": "MyComponent",
                    "designerId": "c3e3b5d8-d3ed-4d5b-90fb-c63022556e5e"
                },
                {
                    "type": "Ext.form.field.Text",
                    "reference": {
                        "name": "items",
                        "type": "array"
                    },
                    "codeClass": null,
                    "userConfig": {
                        "cls": [
                            "searchfield"
                        ],
                        "emptyText": "Search",
                        "fieldLabel": "",
                        "labelAlign": "top",
                        "layout|flex": 1,
                        "margin": null,
                        "style": [
                            "{",
                            "  'border-radius' : '5px'",
                            "}"
                        ],
                        "value": [
                            "{searchText}"
                        ]
                    },
                    "configAlternates": {
                        "value": "binding",
                        "emptyText": "string",
                        "fieldLabel": "string",
                        "labelAlign": "string",
                        "layout|flex": "number",
                        "margin": "auto",
                        "style": "object",
                        "cls": "typedarray"
                    },
                    "name": "MyTextField",
                    "designerId": "c47bddec-aff3-46d4-94ec-e182d594aa92",
                    "cn": [
                        {
                            "type": "viewcontrollereventbinding",
                            "reference": {
                                "name": "listeners",
                                "type": "array"
                            },
                            "codeClass": null,
                            "userConfig": {
                                "buffer": 250,
                                "fn": "onSearchFieldChange",
                                "implHandler": [
                                    "",
                                    "var store = this.getStore('TableOfContents');",
                                    "store.clearFilter();",
                                    "if (!Ext.isEmpty(newValue)) {",
                                    "    var regExp = new RegExp(newValue,'gi');",
                                    "    store.filterBy(function(rec) {",
                                    "       var content =  rec.get('text') + ' ' + rec.get('content');",
                                    "       if (regExp.exec(content)) {",
                                    "           return true;",
                                    "       } else {",
                                    "           return false;",
                                    "       }",
                                    "    });",
                                    "}",
                                    "",
                                    "var data =  this.lookup('contentPnl').getData(data);",
                                    "this.lookup('contentPnl').setData(data);",
                                    "this.highlightTerms();"
                                ],
                                "name": "change",
                                "scope": "me"
                            },
                            "configAlternates": {
                                "buffer": "number",
                                "fn": "string",
                                "implHandler": "code",
                                "name": "string",
                                "scope": "string"
                            },
                            "name": "onSearchFieldChange",
                            "designerId": "e07b5de5-5044-4cf6-a4c0-31b7997ba3ab"
                        }
                    ]
                },
                {
                    "type": "Ext.XTemplate",
                    "reference": {
                        "name": "tpl",
                        "type": "object"
                    },
                    "codeClass": null,
                    "userConfig": {
                        "designer|displayName": "tpl",
                        "implHandler": [
                            ""
                        ]
                    },
                    "configAlternates": {
                        "designer|displayName": "string",
                        "implHandler": "code"
                    },
                    "name": "tpl",
                    "designerId": "9a475f7f-bced-4c56-bb31-9567afa1f56a"
                }
            ]
        },
        {
            "type": "Ext.panel.Panel",
            "reference": {
                "name": "items",
                "type": "array"
            },
            "codeClass": null,
            "userConfig": {
                "bodyBorder": false,
                "cls": [
                    "topborder"
                ],
                "container|align": "middle",
                "container|pack": "center",
                "designer|uiInterfaceName": "default",
                "header": false,
                "height": 50,
                "layout": "hbox",
                "layout|region": "south",
                "title": "My Panel"
            },
            "configAlternates": {
                "container|align": "string",
                "container|pack": "string",
                "header": "boolean",
                "height": "auto",
                "layout": "string",
                "layout|region": "string",
                "title": "string",
                "bodyBorder": "boolean",
                "cls": "typedarray",
                "designer|uiInterfaceName": "string"
            },
            "name": "MyPanel2",
            "designerId": "b851db73-f91a-4517-9044-8bfaea7a057d",
            "cn": [
                {
                    "type": "Ext.button.Button",
                    "reference": {
                        "name": "items",
                        "type": "array"
                    },
                    "codeClass": null,
                    "userConfig": {
                        "layout|flex": null,
                        "margin": "0 5 0 0",
                        "text": "<< Previous",
                        "width": 150
                    },
                    "configAlternates": {
                        "layout|flex": "number",
                        "margin": "auto",
                        "text": "string",
                        "width": "auto"
                    },
                    "name": "MyButton",
                    "designerId": "556f8748-f630-418f-bf4a-e8a7b82a216c",
                    "cn": [
                        {
                            "type": "fixedfunction",
                            "reference": {
                                "name": "items",
                                "type": "array"
                            },
                            "codeClass": null,
                            "userConfig": {
                                "designer|params": [
                                    "button",
                                    "e"
                                ],
                                "designer|viewControllerFn": "onPrevTopic",
                                "fn": "handler",
                                "implHandler": [
                                    "var tree = this.lookup('mytree');",
                                    "var selectedNode = this.getViewModel().get('selectedNode');",
                                    "var nextNode = null;",
                                    "if (selectedNode.previousSibling) {",
                                    "    nextNode = selectedNode.previousSibling;",
                                    "} else if (selectedNode.parentNode){",
                                    "    nextNode = selectedNode.parentNode;",
                                    "}",
                                    "",
                                    "if (nextNode) {",
                                    "    tree.getSelectionModel().select(nextNode);",
                                    "}"
                                ]
                            },
                            "configAlternates": {
                                "designer|params": "typedarray",
                                "designer|viewControllerFn": "string",
                                "fn": "string",
                                "implHandler": "code"
                            },
                            "name": "handler",
                            "designerId": "62d83423-9bfc-41dd-96ad-12e83e5cca91"
                        }
                    ]
                },
                {
                    "type": "Ext.button.Button",
                    "reference": {
                        "name": "items",
                        "type": "array"
                    },
                    "codeClass": null,
                    "userConfig": {
                        "layout|flex": null,
                        "text": "Next >>",
                        "width": 150
                    },
                    "configAlternates": {
                        "layout|flex": "number",
                        "text": "string",
                        "width": "auto"
                    },
                    "name": "MyButton2",
                    "designerId": "d51dba9d-2063-4d6f-afe0-92bfcd436a3a",
                    "cn": [
                        {
                            "type": "fixedfunction",
                            "reference": {
                                "name": "items",
                                "type": "array"
                            },
                            "codeClass": null,
                            "userConfig": {
                                "designer|params": [
                                    "button",
                                    "e"
                                ],
                                "designer|viewControllerFn": "onNextTopic",
                                "fn": "handler",
                                "implHandler": [
                                    "var tree = this.lookup('mytree');",
                                    "var selectedNode = this.getViewModel().get('selectedNode');",
                                    "var nextNode = null;",
                                    "if (selectedNode.childNodes.length > 0) {",
                                    "    nextNode = selectedNode.childNodes[0];",
                                    "} else if (selectedNode.nextSibling) {",
                                    "    nextNode = selectedNode.nextSibling;",
                                    "} else {",
                                    "    nextNode = selectedNode.parentNode.nextSibling;",
                                    "}",
                                    "if (nextNode) {",
                                    "    tree.getSelectionModel().select(nextNode);",
                                    "}",
                                    ""
                                ]
                            },
                            "configAlternates": {
                                "designer|params": "typedarray",
                                "designer|viewControllerFn": "string",
                                "fn": "string",
                                "implHandler": "code"
                            },
                            "name": "handler",
                            "designerId": "9d14cc3a-979e-4a28-8c6d-cd79fe53c737"
                        }
                    ]
                }
            ]
        },
        {
            "type": "viewcontrollereventbinding",
            "reference": {
                "name": "listeners",
                "type": "array"
            },
            "codeClass": null,
            "userConfig": {
                "delay": 500,
                "fn": "onViewportAfterRender",
                "implHandler": [
                    "var tree = this.lookup('mytree');",
                    "",
                    "tree.getSelectionModel().select(tree.getRootNode().getChildAt(0));"
                ],
                "name": "afterrender",
                "scope": "me"
            },
            "configAlternates": {
                "delay": "number",
                "fn": "string",
                "implHandler": "code",
                "name": "string",
                "scope": "string"
            },
            "name": "onViewportAfterRender",
            "designerId": "0f38819a-1161-4975-a97c-1c1ebe635f24"
        }
    ]
}