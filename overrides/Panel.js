Ext.define('MyApp.view.override.Panel', {
    override: 'Ext.panel.Panel',

    print: function(pnl) {

    
        if (!pnl) {
            pnl = this;
        }

        // instantiate hidden iframe

        var iFrameId = "printerFrame";
        var printFrame = Ext.get(iFrameId);

        if (printFrame == null) {
            printFrame = Ext.getBody().appendChild({
                id: iFrameId,
                tag: 'iframe',
                cls: 'x-hidden',
                style: {
                    display: "none"
                }
            });
        }

        var cw = printFrame.dom.contentWindow;

        // instantiate application stylesheets in the hidden iframe

        var stylesheets = "";
        /*
        for (var i = 0; i < document.styleSheets.length; i++) {
            stylesheets += Ext.String.format('<link rel="stylesheet" href="{0}" />', document.styleSheets[i].href);
        }
        */

        stylesheets += ''.concat(
            "<style>",
            ".x-panel-body {overflow: visible !important;}",
            // experimental - page break after embedded panels
            // .x-panel {page-break-after: always; margin-top: 10px}",
            ".gabarlogo { width: 308px; height: 83px; background-repeat: no-repeat; background-image: url('data:image/png;base64,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')}",
            "</style>"
        );

        // various style overrides
        stylesheets += ''.concat(
            "<style>",
          //   ".x-panel-body {overflow: visible !important;}",
            // experimental - page break after embedded panels
            // .x-panel {page-break-after: always; margin-top: 10px}",

            '.handbookNewBodyStyle ol {list-style-type: none !important; margin: 0 !important;}',
            '.handbookNewBodyStyle ol li:before  { content: "(" counter(section, lower-alpha) ") "; letter-spacing: 1px; }',
            '.handbookNewBodyStyle ol li { counter-increment: section; }',
            '.handbookNewBodyStyle ol ol {list-style-type: none !important;}',
            '.handbookNewBodyStyle ol ol li:before { content: "(" counter(section, decimal) ") "; }',
            '.handbookNewBodyStyle ol ol li:first-of-type { counter-reset: section; }',
            '.handbookNewBodyStyle ol ol ol { list-style-type: none !important; }',
            '.handbookNewBodyStyle  ol ol ol li:before { content: "(" counter(section, lower-roman) ") "; }',
            '.handbookNewBodyStyle  ol ol ol ol { list-style-type: none !important;}',
            '.handbookNewBodyStyle ol ol ol ol li:before { content: "(" counter(section, upper-alpha) ") ";}',
            "</style>"
        );

        // get the contents of the panel and remove hardcoded overflow properties
        var markup = pnl.getEl().down('.x-autocontainer-innerCt').dom.innerHTML;
       
        while (markup.indexOf('overflow: auto;') >= 0) {
            markup = markup.replace('overflow: auto;', '');
        }

        var str = Ext.String.format('<html><head><title>State Bar Handbook</title>{0}</head><body><div align="center"><div class="gabarlogo"></div></div>{1}</body></html>', stylesheets, markup);

        // output to the iframe
        cw.document.open();
        cw.document.write(str);
        cw.document.close();

        // remove style attrib that has hardcoded height property
        // cw.document.getElementsByTagName('DIV')[0].removeAttribute('style');

        // print the iframe
        cw.print();

        // destroy the iframe
        Ext.fly(iFrameId).destroy();

    }
});